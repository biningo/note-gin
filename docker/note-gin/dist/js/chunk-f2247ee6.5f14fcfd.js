(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f2247ee6"],{8196:function(t,a,e){"use strict";var o=e("b686"),l=e.n(o);l.a},b686:function(t,a,e){},fc69:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-page-header",{attrs:{content:"MyBook"},on:{back:t.goBack}}),e("el-divider"),e("el-row",[e("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){t.dialogVisible=!0}}},[t._v("添加书籍")]),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"}},[e("el-table-column",{attrs:{label:"ID",prop:"id",width:"60"}}),e("el-table-column",{attrs:{label:"更新时间",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-link",[t._v(t._s(a.row.updated_at.slice(0,10)))])]}}])}),e("el-table-column",{attrs:{label:"图书",width:"500"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-link",[t._v(t._s(a.row.title)+"【"+t._s(a.row.writer)+"】")])]}}])}),e("el-table-column",{attrs:{label:"图片",width:"300"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-link",{attrs:{href:a.row.img_url}},[t._v(t._s(a.row.img_url))])]}}])}),e("el-table-column",{attrs:{label:"状态",width:"300"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-radio",{attrs:{label:"在读"},model:{value:a.row.status,callback:function(e){t.$set(a.row,"status",e)},expression:"scope.row.status"}},[t._v("在读")]),e("el-radio",{attrs:{label:"想读"},model:{value:a.row.status,callback:function(e){t.$set(a.row,"status",e)},expression:"scope.row.status"}},[t._v("想读")]),e("el-radio",{attrs:{label:"读完"},model:{value:a.row.status,callback:function(e){t.$set(a.row,"status",e)},expression:"scope.row.status"}},[t._v("读完")])]}}])}),e("el-table-column",{attrs:{label:"操作",width:""},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.Delete(a.row)}}},[t._v("删除")]),e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.Update(a.row)}}},[t._v("保存修改")])]}}])})],1)],1),e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"Book",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(a){t.dialogVisible=a}}},[t._v(" Title:"),e("el-input",{model:{value:t.book.title,callback:function(a){t.$set(t.book,"title",a)},expression:"book.title"}}),t._v(" Writer:"),e("el-input",{model:{value:t.book.writer,callback:function(a){t.$set(t.book,"writer",a)},expression:"book.writer"}}),t._v(" Status: "),e("el-radio",{attrs:{label:"在读"},model:{value:t.book.status,callback:function(a){t.$set(t.book,"status",a)},expression:"book.status"}},[t._v("在读")]),e("el-radio",{attrs:{label:"想读"},model:{value:t.book.status,callback:function(a){t.$set(t.book,"status",a)},expression:"book.status"}},[t._v("想读")]),e("el-radio",{attrs:{label:"读完"},model:{value:t.book.status,callback:function(a){t.$set(t.book,"status",a)},expression:"book.status"}},[t._v("读完")]),e("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"before-upload":t.UploadImg}},[t.book.img_url?e("img",{staticClass:"avatar",attrs:{src:t.book.img_url}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.AddBook}},[t._v("确 定")])],1)],1)],1)},l=[],s=e("1bab"),i={name:"mybook",mounted:function(){var t=this;this.loading=!0,Object(s["a"])({url:"/my/book/get/all"}).then((function(a){t.tableData=a.data.items,t.Total=a.data.total,t.loading=!1}))},data:function(){return{loading:!1,UploadUrl:"http://localhost:8080/qiniu/img_upload",book:{title:"",writer:"",img_url:"",status:"想读"},tableData:[],Total:0,dialogVisible:!1}},methods:{goBack:function(){this.$router.push("/manage")},Delete:function(t){var a=this;this.loading=!0,Object(s["a"])({url:"/my/book/delete/"+t.id}).then((function(t){a.$message({type:"success",message:t.data.msg}),a.loading=!1})),location.reload()},Update:function(t){var a=this;this.loading=!0,Object(s["a"])({method:"post",url:"/my/book/update",data:t}).then((function(t){a.$message({type:"success",message:t.data.msg}),a.loading=!1}))},UploadImg:function(t){var a=this,e=new FormData;e.append("img",t),this.loading=!0,Object(s["a"])({headers:{"Content-Type":"multipart/form-data"},method:"post",url:"/qiniu/img_upload",data:e}).then((function(t){a.$message({type:"success",message:t.data.msg}),a.book.img_url=t.data.data,a.loading=!1}))},AddBook:function(){var t=this;this.loading=!0,Object(s["a"])({method:"post",url:"/my/book/add",data:this.book}).then((function(a){t.tableData.unshift(a.data.data),t.book={title:"",writer:"",img_url:"",status:"想读"},t.dialogVisible=!1,t.loading=!1}))}}},n=i,r=(e("8196"),e("2877")),u=Object(r["a"])(n,o,l,!1,null,"36e84422",null);a["default"]=u.exports}}]);
//# sourceMappingURL=chunk-f2247ee6.5f14fcfd.js.map